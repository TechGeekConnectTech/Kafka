<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>README - Server Demise Pipeline</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; line-height: 1.6; background: #f8f9fa; }
        .navbar { background: #2c3e50; color: white; padding: 15px 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .navbar h1 { margin: 0; display: inline-block; }
        .navbar .nav-links { float: right; margin-top: 5px; }
        .navbar .nav-links a { color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 3px; transition: background 0.3s; }
        .navbar .nav-links a:hover { background: #34495e; }
        .navbar .nav-links a.active { background: #3498db; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .hero { background: linear-gradient(135deg, #3498db, #2c3e50); color: white; padding: 40px; border-radius: 10px; text-align: center; margin-bottom: 30px; }
        .hero h1 { font-size: 2.5em; margin: 0; }
        .hero p { font-size: 1.2em; margin: 10px 0 0 0; }
        .section { background: white; padding: 30px; margin: 20px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section h2 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        .section h3 { color: #34495e; }
        .code-block { background: #1e1e1e; color: #ddd; padding: 15px; border-radius: 5px; overflow-x: auto; font-family: monospace; margin: 15px 0; }
        .highlight { background: #e8f5e8; padding: 15px; border-left: 4px solid #27ae60; margin: 15px 0; border-radius: 0 5px 5px 0; }
        .warning { background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 15px 0; border-radius: 0 5px 5px 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .card { background: white; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef; }
        .card h4 { color: #3498db; margin-top: 0; }
        .badge { background: #3498db; color: white; padding: 4px 8px; border-radius: 3px; font-size: 0.8em; }
        ul { list-style-type: none; padding-left: 0; }
        ul li { padding: 8px 0; border-bottom: 1px solid #ecf0f1; }
        ul li:before { content: "‚úÖ "; color: #27ae60; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: #f8f9fa; color: #2c3e50; }
        .btn { display: inline-block; background: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin: 5px; transition: background 0.3s; }
        .btn:hover { background: #2980b9; }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>üîß Server Demise Pipeline</h1>
        <div class="nav-links">
            <a href="/documentation.html">üè† Main Documentation</a>
            <a href="/readme.html" class="active">üìã README</a>
            <a href="/quick.html">‚ö° Quick Reference</a>
            <a href="/solution-details.html">üéØ Solution Details</a>
            <a href="http://195.35.6.88:8082/docs" target="_blank">üîó API Docs</a>
        </div>
        <div style="clear: both;"></div>
    </div>
    
    <div class="container">
        <div class="hero">
            <h1>üìã Server Demise Pipeline</h1>
            <p>Comprehensive README & Technical Documentation</p>
            <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin-top: 25px; border: 2px solid rgba(255,255,255,0.3);">
                <h3 style="margin: 0 0 10px 0; color: white;">üë®‚Äçüíª Solution Architect & Developer</h3>
                <h2 style="margin: 0 0 5px 0; color: #3498db;">Mahesh Gavandar</h2>
                <p style="margin: 5px 0 0 0; color: rgba(255,255,255,0.9);">Enterprise Python & Kafka Solutions Specialist</p>
            </div>
        </div>

        <div class="section">
            <h2>üöÄ Quick Start</h2>
            <div class="highlight">
                <strong>Get the system running in 3 simple steps:</strong>
            </div>
            
            <div class="code-block">
# 1. Start Kafka Infrastructure
cd /root/kafka
bin/zookeeper-server-start.sh -daemon config/zookeeper.properties
bin/kafka-server-start.sh -daemon config/server.properties

# 2. Create Pipeline Topic  
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.16.0.8-2.el8.x86_64
bin/kafka-topics.sh --create --topic server-demise-pipeline \
  --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

# 3. Start Pipeline Components
cd kafka-processors
python3 processor_manager_new.py &
python3 -m uvicorn api.main_new:app --host 0.0.0.0 --port 8082 &
            </div>
        </div>

        <div class="section">
            <h2>üèóÔ∏è System Architecture</h2>
            <div class="grid">
                <div class="card">
                    <h4>üéØ Design Principles</h4>
                    <ul>
                        <li>Single Topic Architecture</li>
                        <li>Action-Based Message Routing</li>
                        <li>Sequential Processing</li>
                        <li>Fault Tolerance</li>
                        <li>Horizontal Scalability</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>üîÑ Message Flow</h4>
                    <p style="font-family: monospace; background: #f8f9fa; padding: 10px; border-radius: 3px;">
                        HTTP Request ‚Üí API ‚Üí Kafka ‚Üí Check ‚Üí PowerOff ‚Üí Demise ‚Üí Complete
                    </p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìÇ Project Structure</h2>
            
            <div class="structure-visual">
                <div class="grid">
                    <div class="card">
                        <h4>üåê API Layer</h4>
                        <div class="file-structure">
                            <div class="file-item">
                                <span class="icon">üêç</span> <strong>api/main_new.py</strong>
                                <div class="file-desc">FastAPI server with REST endpoints</div>
                                <div class="endpoints">
                                    <div class="endpoint-item">POST /demise-server</div>
                                    <div class="endpoint-item">POST /batch-demise-servers</div>
                                    <div class="endpoint-item">GET /health</div>
                                    <div class="endpoint-item">GET /pipeline-status</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h4>‚öôÔ∏è Processing Pipeline</h4>
                        <div class="file-structure">
                            <div class="file-item">
                                <span class="icon">‚úÖ</span> <strong>server_check_processor.py</strong>
                                <div class="file-desc">Stage 1: Server validation</div>
                            </div>
                            <div class="file-item">
                                <span class="icon">‚ö°</span> <strong>server_poweroff_processor.py</strong>
                                <div class="file-desc">Stage 2: Power management</div>
                            </div>
                            <div class="file-item">
                                <span class="icon">üíÄ</span> <strong>server_demise_processor.py</strong>
                                <div class="file-desc">Stage 3: Final decommission</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h4>üéØ Core Components</h4>
                        <div class="file-structure">
                            <div class="file-item">
                                <span class="icon">üéØ</span> <strong>processor_manager_new.py</strong>
                                <div class="file-desc">Main orchestrator with ThreadPoolExecutor</div>
                            </div>
                            <div class="file-item">
                                <span class="icon">üìã</span> <strong>config/config.json</strong>
                                <div class="file-desc">System configuration & settings</div>
                            </div>
                            <div class="file-item">
                                <span class="icon">üß™</span> <strong>test_demise_pipeline.py</strong>
                                <div class="file-desc">Comprehensive test suite</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="system-flow">
                    <h4>üîÑ System Flow Diagram</h4>
                    <div class="flow-container">
                        <div class="flow-step">
                            <div class="flow-box api">üì° API Request</div>
                            <div class="flow-desc">HTTP POST to /demise-server</div>
                        </div>
                        <div class="flow-arrow">‚û°Ô∏è</div>
                        <div class="flow-step">
                            <div class="flow-box kafka">üì® Kafka Message</div>
                            <div class="flow-desc">server-demise-pipeline topic</div>
                        </div>
                        <div class="flow-arrow">‚û°Ô∏è</div>
                        <div class="flow-step">
                            <div class="flow-box process1">‚úÖ Check</div>
                            <div class="flow-desc">Server validation</div>
                        </div>
                        <div class="flow-arrow">‚û°Ô∏è</div>
                        <div class="flow-step">
                            <div class="flow-box process2">‚ö° PowerOff</div>
                            <div class="flow-desc">Power management</div>
                        </div>
                        <div class="flow-arrow">‚û°Ô∏è</div>
                        <div class="flow-step">
                            <div class="flow-box process3">üíÄ Demise</div>
                            <div class="flow-desc">Final processing</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <style>
                .file-structure { margin-top: 15px; }
                .file-item { margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 5px; border-left: 3px solid #3498db; }
                .file-item .icon { font-size: 1.2em; margin-right: 8px; }
                .file-desc { font-size: 0.9em; color: #6c757d; margin-top: 5px; }
                .endpoints { margin-top: 10px; }
                .endpoint-item { display: inline-block; background: #e8f5e8; color: #155724; padding: 3px 8px; margin: 2px; border-radius: 3px; font-size: 0.85em; }
                .system-flow { margin-top: 30px; }
                .flow-container { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 10px; margin: 20px 0; }
                .flow-step { text-align: center; }
                .flow-box { padding: 15px 20px; border-radius: 8px; color: white; font-weight: bold; margin-bottom: 5px; }
                .flow-box.api { background: #3498db; }
                .flow-box.kafka { background: #e74c3c; }
                .flow-box.process1 { background: #27ae60; }
                .flow-box.process2 { background: #f39c12; }
                .flow-box.process3 { background: #9b59b6; }
                .flow-desc { font-size: 0.8em; color: #6c757d; }
                .flow-arrow { font-size: 1.5em; color: #3498db; }
                @media (max-width: 768px) { .flow-container { flex-direction: column; } .flow-arrow { transform: rotate(90deg); } }
            </style>
        </div>

        <div class="section">
            <h2>üìã Supported Server Formats</h2>
            <div class="grid">
                <div class="card">
                    <h4>‚úÖ Valid Formats</h4>
                    <ul>
                        <li><span class="badge">Numeric</span> 100-999 (e.g., 150, 250)</li>
                        <li><span class="badge">SRV*</span> SRV001, SRV-WEB-01</li>
                        <li><span class="badge">HOST*</span> HOST-WEB-01, HOST-DB-02</li>
                        <li><span class="badge">VM*</span> VM-TEST-123, VM-PROD-456</li>
                        <li><span class="badge">PROD*</span> PROD-DB-PRIMARY</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>‚ùå Invalid Examples</h4>
                    <ul style="list-style: none;">
                        <li style="border: none;">‚ùå Numbers < 100 or > 999</li>
                        <li style="border: none;">‚ùå Random strings (abc123)</li>
                        <li style="border: none;">‚ùå Special characters (!@#$)</li>
                        <li style="border: none;">‚ùå Empty or null values</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üß™ Testing</h2>
            <div class="code-block">
# Run comprehensive test suite
python3 test_demise_pipeline.py

# Test specific server
curl -X POST "http://195.35.6.88:8082/demise-server" \
  -H "Content-Type: application/json" \
  -d '{"server_id": "TEST-001", "reason": "Testing", "requester": "dev_team"}'

# Check API health
curl http://195.35.6.88:8082/health
            </div>
        </div>

        <div class="section">
            <h2>‚ö° Performance Specifications</h2>
            <table>
                <tr>
                    <th>Metric</th>
                    <th>Value</th>
                    <th>Configuration</th>
                </tr>
                <tr>
                    <td><strong>Throughput</strong></td>
                    <td>~100 requests/minute per processor</td>
                    <td>3 workers per processor type</td>
                </tr>
                <tr>
                    <td><strong>Latency</strong></td>
                    <td>&lt;5 seconds per pipeline stage</td>
                    <td>Simulated processing delays</td>
                </tr>
                <tr>
                    <td><strong>Concurrency</strong></td>
                    <td>9 parallel workers total</td>
                    <td>3 processors √ó 3 workers each</td>
                </tr>
                <tr>
                    <td><strong>Reliability</strong></td>
                    <td>99.9% message durability</td>
                    <td>Kafka replication and persistence</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>üõ†Ô∏è Troubleshooting</h2>
            <div class="warning">
                <h4>Common Issues & Solutions</h4>
            </div>
            
            <div class="code-block">
# Check if Kafka is running
jps | grep -E "QuorumPeerMain|Kafka"

# List available topics
bin/kafka-topics.sh --list --bootstrap-server localhost:9092

# Kill existing API process
pkill -f "uvicorn.*8082"

# Set correct Java path
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.16.0.8-2.el8.x86_64
            </div>
        </div>

        <div class="section">
            <h2>üîó Quick Links</h2>
            <div style="text-align: center;">
                <a href="http://195.35.6.88:8082/docs" class="btn" target="_blank">üìö Interactive API Docs</a>
                <a href="/documentation.html" class="btn">üìñ Complete Documentation</a>
                <a href="/quick.html" class="btn">‚ö° Quick Reference</a>
            </div>
        </div>
    </div>
</body>
</html>