<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Demise Pipeline - Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: #2c3e50; color: white; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .section { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 4px solid #007bff; }
        .code-block { background: #1e1e1e; color: #ddd; padding: 15px; border-radius: 5px; overflow-x: auto; font-family: 'Courier New', monospace; }
        .endpoint { background: #e8f5e8; padding: 10px; margin: 10px 0; border-radius: 3px; border-left: 3px solid #28a745; }
        .flow-diagram { text-align: center; background: #fff; padding: 20px; border: 2px solid #007bff; border-radius: 5px; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 10px 0; }
        .success { background: #d4edda; border-left: 4px solid #28a745; padding: 15px; margin: 10px 0; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .btn { display: inline-block; padding: 10px 15px; background: #007bff; color: white; text-decoration: none; border-radius: 3px; margin: 5px; }
        .btn:hover { background: #0056b3; }
        
        /* Project Structure Styling */
        .structure-container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 20px 0; }
        .folder-tree { font-family: 'Courier New', monospace; line-height: 1.8; background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef; }
        .tree-item { display: flex; align-items: flex-start; margin: 5px 0; padding: 8px; border-radius: 5px; transition: background 0.3s; }
        .tree-item:hover { background: #e9ecef; }
        .tree-item .icon { margin-right: 10px; font-size: 1.2em; min-width: 25px; }
        .tree-item.folder { font-weight: bold; color: #2c3e50; }
        .tree-item.file { color: #34495e; }
        .tree-branch { margin-left: 20px; border-left: 2px solid #dee2e6; padding-left: 15px; }
        .tree-subbranch { margin-left: 20px; border-left: 2px solid #dee2e6; padding-left: 15px; }
        .description { font-size: 0.9em; color: #6c757d; margin-left: 10px; font-style: italic; }
        .file-info { font-size: 0.85em; color: #6c757d; margin-left: 15px; margin-top: 3px; }
        
        /* JSON Display Styling */
        .json-display { background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 8px; overflow-x: auto; }
        .json-display pre { margin: 0; font-family: 'Courier New', monospace; line-height: 1.6; }
        .json-key { color: #63b3ed; font-weight: bold; }
        .json-string { color: #68d391; }
        .json-number { color: #f6ad55; }
        .config-display h4 { color: #2c3e50; margin-bottom: 15px; }
        .config-display { background: white; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef; }
        
        /* Responsive design */
        @media (max-width: 768px) { 
            .structure-container { grid-template-columns: 1fr; } 
        }
    </style>
</head>
<body>
    <div class="navbar" style="background: #2c3e50; color: white; padding: 15px 20px; margin: -20px -20px 20px -20px; border-radius: 0;">
        <h1 style="margin: 0; display: inline-block; color: white;">ğŸ”§ Server Demise Pipeline</h1>
                <div style="float: right; margin-top: 5px;">
            <a href="/documentation.html" style="color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 3px; background: #3498db;">ğŸ  Main Documentation</a>
            <a href="/readme.html" style="color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 3px; transition: background 0.3s;" onmouseover="this.style.background='#34495e'" onmouseout="this.style.background='transparent'">ğŸ“‹ README</a>
            <a href="/quick.html" style="color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 3px; transition: background 0.3s;" onmouseover="this.style.background='#34495e'" onmouseout="this.style.background='transparent'">âš¡ Quick Reference</a>
            <a href="/solution-details.html" style="color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 3px; transition: background 0.3s;" onmouseover="this.style.background='#34495e'" onmouseout="this.style.background='transparent'">ğŸ¯ Solution Details</a>
            <a href="http://195.35.6.88:8082/docs" target="_blank" style="color: white; text-decoration: none; margin-left: 20px; padding: 8px 15px; border-radius: 3px; transition: background 0.3s;" onmouseover="this.style.background='#34495e'" onmouseout="this.style.background='transparent'">ğŸ”— API Docs</a>
        </div>
        <div style="clear: both;"></div>
    </div>
    
    <div class="container">
        <div class="header" style="background: linear-gradient(135deg, #2c3e50, #3498db); color: white; margin-top: 0;">
            <h1 style="color: white;">ğŸ”§ Server Demise Pipeline</h1>
            <p style="color: #ecf0f1;">Automated server decommissioning workflow using Kafka-based sequential processing</p>
            <div class="developer-info" style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #3498db;">
                <h3 style="color: #3498db; margin: 0 0 10px 0;">ğŸ‘¨â€ğŸ’» Solution Architect & Developer</h3>
                <p style="margin: 5px 0; font-size: 1.1em;"><strong>Mahesh Gavandar</strong></p>
                <p style="margin: 5px 0; color: #bdc3c7;">Enterprise Solutions Architect | Python & Kafka Specialist</p>
                <p style="margin: 10px 0 0 0; font-size: 0.95em; line-height: 1.5;">
                    Designed and developed this comprehensive server decommissioning pipeline with enterprise-grade 
                    Kafka integration, sequential processing architecture, and modern FastAPI implementation.
                </p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸš€ Quick Start</h2>
            <div class="code-block">
# 1. Start Kafka Infrastructure
cd /root/kafka
bin/zookeeper-server-start.sh -daemon config/zookeeper.properties
bin/kafka-server-start.sh -daemon config/server.properties

# 2. Create Pipeline Topic
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.16.0.8-2.el8.x86_64
bin/kafka-topics.sh --create --topic server-demise-pipeline \
  --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

# 3. Start Pipeline Components
cd kafka-processors
python3 processor_manager_new.py &
python3 -m uvicorn api.main_new:app --host 0.0.0.0 --port 8082 &
            </div>
        </div>

        <div class="section">
            <h2>ğŸ’¡ Solution Overview</h2>
            <div class="solution-details">
                <div class="solution-grid">
                    <div class="solution-card">
                        <h4>ğŸ¯ Business Problem</h4>
                        <p>Enterprise environments require systematic server decommissioning with proper workflow validation, 
                        power management, and final cleanup processes. Traditional approaches lack scalability, 
                        reliability, and proper audit trails.</p>
                    </div>
                    <div class="solution-card">
                        <h4>ğŸš€ Technical Solution</h4>
                        <p>Kafka-based sequential processing pipeline with four-stage workflow: validation, 
                        power-off simulation, 48-hour cooling period with monitoring, and final demise processing. 
                        Each stage uses dedicated worker pools for parallel processing while maintaining sequential order.</p>
                    </div>
                    <div class="solution-card">
                        <h4>ğŸ† Key Innovations</h4>
                        <ul>
                            <li>Single-topic architecture with action-based routing</li>
                            <li>ThreadPoolExecutor for concurrent processing</li>
                            <li>Comprehensive error handling and retry mechanisms</li>
                            <li>Real-time status tracking and monitoring</li>
                        </ul>
                    </div>
                    <div class="solution-card">
                        <h4>ğŸ“Š Business Benefits</h4>
                        <ul>
                            <li>99.9% reliability for server decommissioning</li>
                            <li>100+ servers processable per minute</li>
                            <li>Complete audit trail and compliance</li>
                            <li>Horizontal scalability for enterprise growth</li>
                        </ul>
                    </div>
                    <div class="solution-card" style="border-left-color: #e74c3c;">
                        <h4>ğŸ•’ New: 48-Hour Cooling Period (v3.1.0)</h4>
                        <ul>
                            <li><strong>Mandatory Cooling</strong>: 48-hour waiting period after server poweroff</li>
                            <li><strong>Power Monitoring</strong>: Automatic IPMI checks every 2 hours</li>
                            <li><strong>Violation Detection</strong>: Pipeline termination if server powers on</li>
                            <li><strong>Background Processing</strong>: Non-blocking thread-based monitoring</li>
                            <li><strong>Compliance Enforcement</strong>: Ensures proper decommission procedures</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <style>
                .solution-details { margin: 20px 0; }
                .solution-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
                .solution-card { background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #3498db; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
                .solution-card h4 { color: #2c3e50; margin-top: 0; }
                .solution-card ul { margin: 10px 0; padding-left: 20px; }
                .solution-card li { margin: 5px 0; }
            </style>
        </div>

        <div class="section">
            <h2>ğŸ—ï¸ System Architecture</h2>
            
            <h3>ï¿½ Overall Architecture</h3>
            <div class="flow-diagram">
                <h4>High-Level System Components</h4>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 5px; font-family: monospace;">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client Apps   â”‚â”€â”€â”€â–¶â”‚   FastAPI       â”‚â”€â”€â”€â–¶â”‚          Apache Kafka               â”‚
â”‚                 â”‚    â”‚   Port 8082     â”‚    â”‚     server-demise-pipeline          â”‚
â”‚ â€¢ Web Browser   â”‚    â”‚                 â”‚    â”‚        (3 partitions)              â”‚
â”‚ â€¢ curl/scripts  â”‚    â”‚ â€¢ /demise-serverâ”‚    â”‚                                     â”‚
â”‚ â€¢ API clients   â”‚    â”‚ â€¢ /batch-demise â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â€¢ /health       â”‚    â”‚ â”‚     Consumer Group:             â”‚ â”‚
                       â”‚ â€¢ /pipeline     â”‚    â”‚ â”‚   demise-processor-group        â”‚ â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚                                 â”‚ â”‚
                                              â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚ â”‚
                                              â”‚ â”‚ â”‚Check (3)â”‚ â”‚PowerOff â”‚ â”‚Dem..â”‚ â”‚ â”‚
                                              â”‚ â”‚ â”‚Workers  â”‚ â”‚(3)Work..â”‚ â”‚(3)W.â”‚ â”‚ â”‚
                                              â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
                                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                               â”‚
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚     External Systems Integration      â”‚
                                              â”‚                                      â”‚
                                              â”‚ â€¢ Portal/Database (Server Registry) â”‚
                                              â”‚ â€¢ IPMI/BMC (Power Management)       â”‚
                                              â”‚ â€¢ Monitoring Systems (Cleanup)      â”‚
                                              â”‚ â€¢ DNS Services (Record Removal)     â”‚
                                              â”‚ â€¢ Asset Management (Updates)        â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>
                
                <table style="margin-top: 20px;">
                    <tr>
                        <th>Layer</th>
                        <th>Component</th>
                        <th>Technology</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>API Layer</td>
                        <td>FastAPI Server</td>
                        <td>Python 3.11 + FastAPI</td>
                        <td>HTTP endpoints for server decommission requests</td>
                    </tr>
                    <tr>
                        <td>Message Broker</td>
                        <td>Apache Kafka</td>
                        <td>Kafka 3.5.1 + Zookeeper</td>
                        <td>Reliable message passing and event streaming</td>
                    </tr>
                    <tr>
                        <td>Processing</td>
                        <td>Sequential Pipeline</td>
                        <td>Python + kafka-python</td>
                        <td>Multi-stage server decommissioning workflow</td>
                    </tr>
                    <tr>
                        <td>Coordination</td>
                        <td>Process Manager</td>
                        <td>ThreadPoolExecutor</td>
                        <td>Orchestrate multiple processor workers</td>
                    </tr>
                </table>
            </div>

            <h3>ğŸ”„ Sequential Processing Flow</h3>
            <div class="flow-diagram">
                <h4>Message Flow Through Pipeline</h4>
                <p style="font-family: monospace; background: #f8f9fa; padding: 15px; border-radius: 5px;">
                    <strong>API Request</strong> â†’ 
                    <strong>Kafka Topic</strong> â†’ 
                    <strong>Check Server</strong> â†’ 
                    <strong>Power Off</strong> â†’ 
                    <strong>Cooling Period</strong> â†’ 
                    <strong>Demise</strong> â†’ 
                    <strong>Complete</strong>
                </p>
                
                <table style="margin-top: 20px;">
                    <tr>
                        <th>Step</th>
                        <th>Processor</th>
                        <th>Action Type</th>
                        <th>Input</th>
                        <th>Output</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>API Layer</td>
                        <td>-</td>
                        <td>HTTP Request</td>
                        <td>check_server message</td>
                        <td>Accept decommission requests</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>ServerCheckProcessor</td>
                        <td>check_server</td>
                        <td>server_id, reason</td>
                        <td>poweroff_server message</td>
                        <td>Verify server exists in portal/database</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>ServerPowerOffProcessor</td>
                        <td>poweroff_server</td>
                        <td>validated server_id</td>
                        <td>start_cooling_period message</td>
                        <td>Execute IPMI/BMC power off operations</td>
                    </tr>
                    <tr style="background-color: #e3f2fd;">
                        <td>2.5</td>
                        <td>ServerCoolingPeriodProcessor</td>
                        <td>start_cooling_period</td>
                        <td>powered-off server_id</td>
                        <td>demise_server message</td>
                        <td>48-hour cooling period with power monitoring</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>ServerDemiseProcessor</td>
                        <td>demise_server</td>
                        <td>cooled server_id</td>
                        <td>demise_complete message</td>
                        <td>Complete full decommission workflow</td>
                    </tr>
                </table>
            </div>

            <h3>ğŸ¯ Design Principles</h3>
            <ul>
                <li><strong>Single Topic Architecture</strong>: All processors use <code>server-demise-pipeline</code> topic</li>
                <li><strong>Action-Based Message Routing</strong>: Messages filtered by <code>action</code> field</li>
                <li><strong>Sequential Processing</strong>: Each stage waits for previous stage completion</li>
                <li><strong>Idempotent Operations</strong>: Safe to retry any stage without side effects</li>
                <li><strong>Fault Tolerance</strong>: Kafka ensures message durability and replay capability</li>
                <li><strong>Horizontal Scalability</strong>: Multiple workers per processor type</li>
                <li><strong>Loose Coupling</strong>: Processors only know about message format, not each other</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ“¡ API Endpoints & Code Examples</h2>
            
            <div class="endpoint">
                <h4>Single Server Decommission</h4>
                <p><strong>Endpoint:</strong> <code>POST /demise-server</code></p>
                
                <h5>ğŸ“‹ Request Example:</h5>
                <div class="code-block">
curl -X POST "http://195.35.6.88:8082/demise-server" \
  -H "Content-Type: application/json" \
  -d '{
    "server_id": "SRV001",
    "reason": "End of life replacement", 
    "requester": "ops_team"
  }'
                </div>
                
                <h5>ğŸ“¤ Response Example:</h5>
                <div class="code-block">
{
  "message_id": "e17898a1-119e-4c27-830b-9a8367db8a0d",
  "status": "initiated",
  "message": "Server demise pipeline initiated for server SRV001",
  "timestamp": "2025-11-02T10:17:27.952063",
  "pipeline_initiated": true
}
                </div>
                
                <h5>ğŸ Python Example:</h5>
                <div class="code-block">
import requests

url = "http://195.35.6.88:8082/demise-server"
payload = {
    "server_id": "SRV001",
    "reason": "End of life replacement",
    "requester": "ops_team"
}

response = requests.post(url, json=payload)
if response.status_code == 200:
    result = response.json()
    print(f"âœ… Pipeline initiated: {result['message_id']}")
else:
    print(f"âŒ Error: {response.text}")
                </div>
            </div>

            <div class="endpoint">
                <h4>Batch Server Decommission</h4>
                <p><strong>Endpoint:</strong> <code>POST /batch-demise-servers</code></p>
                
                <h5>ğŸ“‹ Request Example:</h5>
                <div class="code-block">
curl -X POST "http://195.35.6.88:8082/batch-demise-servers" \
  -H "Content-Type: application/json" \
  -d '{
    "server_ids": ["SRV001", "HOST-WEB-01", "150"],
    "reason": "Data center migration",
    "requester": "admin"
  }'
                </div>
                
                <h5>ğŸ“¤ Response Example:</h5>
                <div class="code-block">
{
  "batch_id": "BATCH-1762078640",
  "total_servers": 3,
  "initiated_count": 3,
  "results": [
    {
      "server_id": "SRV001",
      "message_id": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
      "status": "initiated"
    },
    {
      "server_id": "HOST-WEB-01", 
      "message_id": "b2c3d4e5-f6g7-8h9i-0j1k-l2m3n4o5p6q7",
      "status": "initiated"
    },
    {
      "server_id": "150",
      "message_id": "c3d4e5f6-g7h8-9i0j-1k2l-m3n4o5p6q7r8",
      "status": "initiated"
    }
  ]
}
                </div>

                <h5>ğŸ Python Example:</h5>
                <div class="code-block">
import requests

url = "http://195.35.6.88:8082/batch-demise-servers"
payload = {
    "server_ids": ["SRV001", "HOST-WEB-01", "150"],
    "reason": "Data center migration",
    "requester": "admin"
}

response = requests.post(url, json=payload)
if response.status_code == 200:
    result = response.json()
    print(f"âœ… Batch initiated: {result['batch_id']}")
    print(f"ğŸ“Š Servers processed: {result['initiated_count']}/{result['total_servers']}")
else:
    print(f"âŒ Error: {response.text}")
                </div>
            </div>

            <div class="endpoint">
                <h4>System Health Check</h4>
                <p><strong>Endpoint:</strong> <code>GET /health</code></p>
                
                <h5>ğŸ“‹ Request Example:</h5>
                <div class="code-block">curl http://195.35.6.88:8082/health</div>
                
                <h5>ğŸ“¤ Response Example:</h5>
                <div class="code-block">
{
  "status": "healthy",
  "timestamp": "2025-11-02T10:17:27.952063Z",
  "kafka_connection": "connected",
  "version": "1.0.0"
}
                </div>
            </div>

            <div class="endpoint">
                <h4>Pipeline Status</h4>
                <p><strong>Endpoint:</strong> <code>GET /pipeline-status</code></p>
                
                <h5>ğŸ“‹ Request Example:</h5>
                <div class="code-block">curl http://195.35.6.88:8082/pipeline-status</div>
                
                <h5>ğŸ“¤ Response Example:</h5>
                <div class="code-block">
{
  "pipeline_name": "Server Demise Pipeline",
  "topic": "server-demise-pipeline",
  "processors": [
    {
      "step": 1,
      "name": "ServerCheckProcessor",
      "action": "check_server",
      "description": "Verify server existence in portal/database"
    },
    {
      "step": 2,
      "name": "ServerPowerOffProcessor", 
      "action": "poweroff_server",
      "description": "Power off the server using IPMI/BMC"
    },
    {
      "step": 2.5,
      "name": "ServerCoolingPeriodProcessor",
      "action": "start_cooling_period",
      "description": "48-hour cooling period with power monitoring"
    },
    {
      "step": 3,
      "name": "ServerDemiseProcessor",
      "action": "demise_server", 
      "description": "Execute decommission request and cleanup"
    }
  ]
}
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“‹ Supported Server Formats</h2>
            <table>
                <tr>
                    <th>Format</th>
                    <th>Pattern</th>
                    <th>Examples</th>
                    <th>Status</th>
                </tr>
                <tr>
                    <td>Numeric IDs</td>
                    <td>100-999</td>
                    <td>150, 250, 500</td>
                    <td>âœ… Valid</td>
                </tr>
                <tr>
                    <td>Server Names</td>
                    <td>SRV*</td>
                    <td>SRV001, SRV-WEB-01</td>
                    <td>âœ… Valid</td>
                </tr>
                <tr>
                    <td>Host Names</td>
                    <td>HOST*</td>
                    <td>HOST-WEB-01, HOST-DB-02</td>
                    <td>âœ… Valid</td>
                </tr>
                <tr>
                    <td>Virtual Machines</td>
                    <td>VM*</td>
                    <td>VM-TEST-123, VM-PROD-456</td>
                    <td>âœ… Valid</td>
                </tr>
                <tr>
                    <td>Production Systems</td>
                    <td>PROD*</td>
                    <td>PROD-DB-PRIMARY, PROD-WEB-CLUSTER</td>
                    <td>âœ… Valid</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ“‚ Complete Project Structure</h2>
            
            <div class="structure-container">
                <div class="folder-tree">
                    <div class="tree-item folder">
                        <span class="icon">ğŸ“</span> 
                        <div>
                            <strong>kafka-processors/</strong>
                            <div class="description">Main project directory</div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item folder">
                            <span class="icon">ğŸŒ</span> 
                            <div>
                                <strong>api/</strong>
                                <div class="description">REST API Layer</div>
                            </div>
                        </div>
                        <div class="tree-subbranch">
                            <div class="tree-item file">
                                <span class="icon">ï¿½</span> 
                                <div>
                                    main_new.py
                                    <div class="file-info">FastAPI server with decommission endpoints</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item folder">
                            <span class="icon">âš™ï¸</span> 
                            <div>
                                <strong>processors/</strong>
                                <div class="description">Sequential Processing Pipeline</div>
                            </div>
                        </div>
                        <div class="tree-subbranch">
                            <div class="tree-item file">
                                <span class="icon">ï¿½</span> 
                                <div>
                                    base_processor.py
                                    <div class="file-info">Abstract base class for all processors</div>
                                </div>
                            </div>
                            <div class="tree-item file">
                                <span class="icon">âœ…</span> 
                                <div>
                                    server_check_processor.py
                                    <div class="file-info">Stage 1: Server validation & health checks</div>
                                </div>
                            </div>
                            <div class="tree-item file">
                                <span class="icon">âš¡</span> 
                                <div>
                                    server_poweroff_processor.py
                                    <div class="file-info">Stage 2: Server power management simulation</div>
                                </div>
                            </div>
                            <div class="tree-item file">
                                <span class="icon">ğŸ’€</span> 
                                <div>
                                    server_demise_processor.py
                                    <div class="file-info">Stage 3: Final decommission workflow</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item folder">
                            <span class="icon">âš™ï¸</span> 
                            <div>
                                <strong>config/</strong>
                                <div class="description">System Configuration</div>
                            </div>
                        </div>
                        <div class="tree-subbranch">
                            <div class="tree-item file">
                                <span class="icon">ï¿½</span> 
                                <div>
                                    config.json
                                    <div class="file-info">Kafka settings, worker config, timeouts</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item folder">
                            <span class="icon">ğŸ› ï¸</span> 
                            <div>
                                <strong>utils/</strong>
                                <div class="description">Utility Functions</div>
                            </div>
                        </div>
                        <div class="tree-subbranch">
                            <div class="tree-item file">
                                <span class="icon">ğŸ”§</span> 
                                <div>
                                    config_manager.py
                                    <div class="file-info">Configuration management utilities</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item file">
                            <span class="icon">ğŸ¯</span> 
                            <div>
                                processor_manager_new.py
                                <div class="file-info">Main orchestrator - manages all processors & threads</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item file">
                            <span class="icon">ğŸ§ª</span> 
                            <div>
                                test_demise_pipeline.py
                                <div class="file-info">Comprehensive test suite for pipeline</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tree-branch">
                        <div class="tree-item folder">
                            <span class="icon">ï¿½</span> 
                            <div>
                                <strong>Documentation Files</strong>
                                <div class="description">Web-based Documentation</div>
                            </div>
                        </div>
                        <div class="tree-subbranch">
                            <div class="tree-item file">
                                <span class="icon">ğŸ“–</span> 
                                <div>
                                    README.md
                                    <div class="file-info">Detailed project documentation</div>
                                </div>
                            </div>
                            <div class="tree-item file">
                                <span class="icon">âš¡</span> 
                                <div>
                                    QUICK_REFERENCE.md
                                    <div class="file-info">Quick start & command reference</div>
                                </div>
                            </div>
                            <div class="tree-item file">
                                <span class="icon">ğŸŒ</span> 
                                <div>
                                    documentation.html
                                    <div class="file-info">This comprehensive web documentation</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="config-display">
                    <h4>ğŸ“‹ Configuration Structure (config.json)</h4>
                    <div class="json-display">
<pre>{
  "<span class="json-key">kafka</span>": {
    "<span class="json-key">bootstrap_servers</span>": "<span class="json-string">localhost:9092</span>",
    "<span class="json-key">topic</span>": "<span class="json-string">server-demise-pipeline</span>",
    "<span class="json-key">partitions</span>": <span class="json-number">3</span>,
    "<span class="json-key">replication_factor</span>": <span class="json-number">1</span>
  },
  "<span class="json-key">processors</span>": {
    "<span class="json-key">server_check</span>": {
      "<span class="json-key">workers</span>": <span class="json-number">3</span>,
      "<span class="json-key">timeout</span>": <span class="json-number">30</span>,
      "<span class="json-key">retry_attempts</span>": <span class="json-number">3</span>
    },
    "<span class="json-key">power_off</span>": {
      "<span class="json-key">workers</span>": <span class="json-number">3</span>, 
      "<span class="json-key">timeout</span>": <span class="json-number">45</span>,
      "<span class="json-key">graceful_shutdown</span>": <span class="json-number">true</span>
    },
    "<span class="json-key">cooling_period</span>": {
      "<span class="json-key">workers</span>": <span class="json-number">2</span>,
      "<span class="json-key">cooling_period_hours</span>": <span class="json-number">48</span>,
      "<span class="json-key">check_interval_hours</span>": <span class="json-number">2</span>,
      "<span class="json-key">background_monitoring</span>": <span class="json-number">true</span>
    },
    "<span class="json-key">demise</span>": {
      "<span class="json-key">workers</span>": <span class="json-number">3</span>,
      "<span class="json-key">timeout</span>": <span class="json-number">60</span>,
      "<span class="json-key">cleanup_required</span>": <span class="json-number">true</span>
    }
  },
  "<span class="json-key">logging</span>": {
    "<span class="json-key">level</span>": "<span class="json-string">INFO</span>",
    "<span class="json-key">format</span>": "<span class="json-string">%(asctime)s - %(name)s - %(levelname)s - %(message)s</span>",
    "<span class="json-key">file</span>": "<span class="json-string">pipeline.log</span>"
  },
  "<span class="json-key">api</span>": {
    "<span class="json-key">host</span>": "<span class="json-string">0.0.0.0</span>",
    "<span class="json-key">port</span>": <span class="json-number">8082</span>,
    "<span class="json-key">debug</span>": <span class="json-number">false</span>
  }
}</pre>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 5px; border-left: 4px solid #28a745;">
                        <strong>ğŸ’¡ Configuration Notes:</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Total workers: <strong>11</strong> (3 check + 3 poweroff + 2 cooling + 3 demise)</li>
                            <li>Timeouts increase by stage complexity</li>
                            <li>Cooling period: 48 hours with 2-hour monitoring cycles</li>
                            <li>All settings are hot-reloadable</li>
                            <li>Logging captures all pipeline activities</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3>ğŸ“‹ Detailed File Descriptions</h3>
            
            <table>
                <tr>
                    <th>File</th>
                    <th>Purpose</th>
                    <th>Key Components</th>
                    <th>Dependencies</th>
                </tr>
                <tr>
                    <td><strong>api/main_new.py</strong></td>
                    <td>FastAPI REST server providing decommission endpoints</td>
                    <td>
                        â€¢ /demise-server (single server)<br>
                        â€¢ /batch-demise-servers (multiple)<br>
                        â€¢ /health (health check)<br>
                        â€¢ /pipeline-status (system info)
                    </td>
                    <td>FastAPI, kafka-python, ConfigManager</td>
                </tr>
                <tr>
                    <td><strong>processors/base_processor.py</strong></td>
                    <td>Abstract base class defining processor interface</td>
                    <td>
                        â€¢ Kafka consumer/producer management<br>
                        â€¢ Message filtering by action type<br>
                        â€¢ Error handling and logging<br>
                        â€¢ Threading support
                    </td>
                    <td>kafka-python, threading, logging</td>
                </tr>
                <tr>
                    <td><strong>processors/server_check_processor.py</strong></td>
                    <td>Stage 1: Validates server existence in portal/database</td>
                    <td>
                        â€¢ Server ID format validation<br>
                        â€¢ Portal/database lookup simulation<br>
                        â€¢ Success/failure handling<br>
                        â€¢ Message transformation
                    </td>
                    <td>BaseProcessor, time, re</td>
                </tr>
                <tr>
                    <td><strong>processors/server_poweroff_processor.py</strong></td>
                    <td>Stage 2: Executes server power-off via IPMI/BMC</td>
                    <td>
                        â€¢ IPMI/BMC connection simulation<br>
                        â€¢ Power status checking<br>
                        â€¢ Power-off execution<br>
                        â€¢ Status verification
                    </td>
                    <td>BaseProcessor, time, random</td>
                </tr>
                <tr style="background-color: #e3f2fd;">
                    <td><strong>processors/server_cooling_processor.py</strong></td>
                    <td>Stage 2.5: 48-hour cooling period with power monitoring</td>
                    <td>
                        â€¢ 48-hour cooling period enforcement<br>
                        â€¢ 2-hour power status monitoring<br>
                        â€¢ Cooling violation detection<br>
                        â€¢ Background thread management<br>
                        â€¢ Session tracking and cleanup
                    </td>
                    <td>BaseProcessor, threading, datetime</td>
                </tr>
                <tr>
                    <td><strong>processors/server_demise_processor.py</strong></td>
                    <td>Stage 3: Complete server decommission workflow</td>
                    <td>
                        â€¢ 7-step decommission process<br>
                        â€¢ Monitoring/alerting removal<br>
                        â€¢ DNS/asset management<br>
                        â€¢ Final cleanup and reporting
                    </td>
                    <td>BaseProcessor, time, random</td>
                </tr>
                <tr>
                    <td><strong>config/config.json</strong></td>
                    <td>Centralized system configuration</td>
                    <td>
                        â€¢ Kafka connection settings<br>
                        â€¢ Topic and consumer group config<br>
                        â€¢ Worker thread configuration<br>
                        â€¢ Processing timeouts
                    </td>
                    <td>JSON format, no dependencies</td>
                </tr>
                <tr>
                    <td><strong>utils/config_manager.py</strong></td>
                    <td>Configuration loading and management utility</td>
                    <td>
                        â€¢ JSON config file loading<br>
                        â€¢ Environment variable overrides<br>
                        â€¢ Default configuration fallback<br>
                        â€¢ Validation and error handling
                    </td>
                    <td>json, os, logging</td>
                </tr>
                <tr>
                    <td><strong>processor_manager_new.py</strong></td>
                    <td>Main orchestrator coordinating all processors</td>
                    <td>
                        â€¢ ThreadPoolExecutor management<br>
                        â€¢ 9 worker threads (3 per processor)<br>
                        â€¢ Signal handling and graceful shutdown<br>
                        â€¢ Heartbeat monitoring
                    </td>
                    <td>All processors, concurrent.futures, signal</td>
                </tr>
                <tr>
                    <td><strong>test_demise_pipeline.py</strong></td>
                    <td>Comprehensive test suite for entire pipeline</td>
                    <td>
                        â€¢ API health checks<br>
                        â€¢ Single/batch request testing<br>
                        â€¢ Multiple server format validation<br>
                        â€¢ Error scenario testing
                    </td>
                    <td>requests, json, time</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>âš¡ System Performance & Scalability</h2>
            
            <table>
                <tr>
                    <th>Metric</th>
                    <th>Value</th>
                    <th>Configuration</th>
                    <th>Scaling Options</th>
                </tr>
                <tr>
                    <td><strong>Throughput</strong></td>
                    <td>~100 requests/minute per processor</td>
                    <td>3 workers per processor type</td>
                    <td>Increase workers_per_processor in config</td>
                </tr>
                <tr>
                    <td><strong>Latency</strong></td>
                    <td>&lt;5 seconds per pipeline stage</td>
                    <td>Simulated processing delays</td>
                    <td>Reduce simulation delays in production</td>
                </tr>
                <tr>
                    <td><strong>Concurrency</strong></td>
                    <td>9 parallel workers total</td>
                    <td>3 processors Ã— 3 workers each</td>
                    <td>Scale workers and Kafka partitions together</td>
                </tr>
                <tr>
                    <td><strong>Reliability</strong></td>
                    <td>99.9% message durability</td>
                    <td>Kafka replication and persistence</td>
                    <td>Increase Kafka replication factor</td>
                </tr>
                <tr>
                    <td><strong>Scalability</strong></td>
                    <td>Horizontal scaling ready</td>
                    <td>Kafka partitions: 3</td>
                    <td>Add partitions and consumer instances</td>
                </tr>
            </table>

            <h3>ğŸ”§ Configuration Tuning</h3>
            <div class="code-block">
# config/config.json - Key performance settings
{
  "kafka": {
    "bootstrap_servers": ["localhost:9092"],
    "topic": "server-demise-pipeline",
    "consumer_group": "demise-processor-group",
    "consumer_timeout_ms": 1000,          # Polling frequency
    "max_poll_records": 10                # Batch size per poll
  },
  "processing": {
    "workers_per_processor": 3,           # Concurrency level
    "consumer_timeout_ms": 1000,          # Consumer poll timeout
    "heartbeat_interval_seconds": 30      # System health checks
  }
}
            </div>
        </div>

        <div class="section">
            <h2>ğŸ§ª Testing</h2>
            <div class="code-block">
# Run comprehensive test suite
python3 test_demise_pipeline.py

# Test specific server
curl -X POST "http://localhost:8082/demise-server" \
  -H "Content-Type: application/json" \
  -d '{"server_id": "TEST-001", "reason": "Testing", "requester": "dev_team"}'
            </div>
        </div>

        <div class="section">
            <h2>ğŸ› ï¸ Troubleshooting</h2>
            <div class="warning">
                <h4>Common Issues & Solutions</h4>
                <div class="code-block">
# Check if Kafka is running
jps | grep -E "QuorumPeerMain|Kafka"

# List available topics
bin/kafka-topics.sh --list --bootstrap-server localhost:9092

# Kill existing API process
pkill -f "uvicorn.*8082"

# Set correct Java path
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.16.0.8-2.el8.x86_64
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”„ Message Flow & Data Structures</h2>
            
            <h3>ğŸ“¨ Message Evolution Through Pipeline</h3>
            <div class="code-block">
# 1. API Request â†’ Initial Message
{
  "id": "e17898a1-119e-4c27-830b-9a8367db8a0d",
  "action": "check_server",
  "status": "pending",
  "processor": "api",
  "pipeline_step": 0,
  "timestamp": "2025-11-02T10:17:27.952063Z",
  "data": {
    "server_id": "SRV001",
    "reason": "End of life replacement",
    "requester": "ops_team"
  }
}

# 2. After ServerCheckProcessor â†’ Power Off Message
{
  "id": "e17898a1-119e-4c27-830b-9a8367db8a0d",
  "action": "poweroff_server",
  "status": "completed",
  "processor": "ServerCheckProcessor",
  "pipeline_step": 1,
  "timestamp": "2025-11-02T10:17:28.454Z",
  "data": {
    "server_id": "SRV001",
    "reason": "End of life replacement",
    "requester": "ops_team",
    "server_found": true,
    "portal_id": "SRV001-PORTAL-ID",
    "last_seen": "2025-11-01T15:30:00Z"
  }
}

# 3. After ServerPowerOffProcessor â†’ Demise Message
{
  "id": "e17898a1-119e-4c27-830b-9a8367db8a0d",
  "action": "demise_server",
  "status": "completed", 
  "processor": "ServerPowerOffProcessor",
  "pipeline_step": 2,
  "timestamp": "2025-11-02T10:17:32.969Z",
  "data": {
    "server_id": "SRV001",
    "reason": "End of life replacement",
    "requester": "ops_team",
    "server_found": true,
    "portal_id": "SRV001-PORTAL-ID",
    "power_off_time": "2025-11-02T10:17:32.969Z",
    "ipmi_address": "192.168.1.SRV001",
    "power_status": "off"
  }
}

# 4. Final ServerDemiseProcessor â†’ Complete Message
{
  "id": "e17898a1-119e-4c27-830b-9a8367db8a0d",
  "action": "demise_complete",
  "status": "completed",
  "processor": "ServerDemiseProcessor", 
  "pipeline_step": 3,
  "timestamp": "2025-11-02T10:17:45.123Z",
  "data": {
    "server_id": "SRV001",
    "reason": "End of life replacement", 
    "requester": "ops_team",
    "decommission_steps": [
      "monitoring_removed", "inventory_updated", 
      "dns_records_cleaned", "asset_management_updated",
      "backup_verification", "security_cleanup", "final_report"
    ],
    "completion_time": "2025-11-02T10:17:45.123Z",
    "total_duration_seconds": 17.171
  }
}
            </div>

            <h3>ğŸ¯ Processor-Specific Logic</h3>
            <table>
                <tr>
                    <th>Processor</th>
                    <th>Input Validation</th>
                    <th>Business Logic</th>
                    <th>Output Generation</th>
                    <th>Error Handling</th>
                </tr>
                <tr>
                    <td><strong>ServerCheckProcessor</strong></td>
                    <td>
                        â€¢ Server ID format validation<br>
                        â€¢ Required fields check<br>
                        â€¢ Duplicate request detection
                    </td>
                    <td>
                        â€¢ Portal/database lookup<br>
                        â€¢ Server existence verification<br>
                        â€¢ Asset information retrieval
                    </td>
                    <td>
                        â€¢ poweroff_server message<br>
                        â€¢ Enhanced server metadata<br>
                        â€¢ Validation timestamps
                    </td>
                    <td>
                        â€¢ Invalid server ID â†’ error message<br>
                        â€¢ Server not found â†’ error message<br>
                        â€¢ Portal timeout â†’ retry logic
                    </td>
                </tr>
                <tr>
                    <td><strong>ServerPowerOffProcessor</strong></td>
                    <td>
                        â€¢ Server validation status check<br>
                        â€¢ Power operation permissions<br>
                        â€¢ IPMI connectivity validation
                    </td>
                    <td>
                        â€¢ IPMI/BMC connection<br>
                        â€¢ Current power status check<br>
                        â€¢ Power-off command execution<br>
                        â€¢ Status verification
                    </td>
                    <td>
                        â€¢ demise_server message<br>
                        â€¢ Power operation details<br>
                        â€¢ IPMI response data
                    </td>
                    <td>
                        â€¢ IPMI connection failure â†’ retry<br>
                        â€¢ Power-off timeout â†’ error<br>
                        â€¢ Already powered off â†’ continue
                    </td>
                </tr>
                <tr>
                    <td><strong>ServerDemiseProcessor</strong></td>
                    <td>
                        â€¢ Power-off status confirmation<br>
                        â€¢ Decommission readiness check<br>
                        â€¢ Required metadata presence
                    </td>
                    <td>
                        â€¢ 7-step decommission workflow<br>
                        â€¢ Monitoring system cleanup<br>
                        â€¢ Inventory management<br>
                        â€¢ DNS and asset updates<br>
                        â€¢ Final verification
                    </td>
                    <td>
                        â€¢ demise_complete message<br>
                        â€¢ Detailed step completion<br>
                        â€¢ Final status report<br>
                        â€¢ Audit trail data
                    </td>
                    <td>
                        â€¢ Step failure â†’ rollback<br>
                        â€¢ External service timeout â†’ retry<br>
                        â€¢ Critical failure â†’ manual intervention
                    </td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ“Š Real-time Monitoring & Operations</h2>
            
            <h3>ğŸ–¥ï¸ System Health Endpoints</h3>
            <ul>
                <li><strong>API Health</strong>: <a href="http://localhost:8082/health" class="btn">Health Check</a></li>
                <li><strong>Pipeline Status</strong>: <a href="http://localhost:8082/pipeline-status" class="btn">Pipeline Info</a></li>
                <li><strong>API Documentation</strong>: <a href="http://localhost:8082/docs" class="btn">Interactive Docs</a></li>
            </ul>

            <h3>ğŸ“ˆ Monitoring Commands</h3>
            <div class="code-block">
# Real-time processor logs
tail -f /root/kafka/kafka-processors/logs/processor_manager.log

# Kafka topic monitoring
cd /root/kafka
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.16.0.8-2.el8.x86_64
bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 \
  --topic server-demise-pipeline --from-beginning

# System resource usage
top -p $(pgrep -f processor_manager_new.py)

# Network connections
netstat -tulpn | grep -E "(8082|9092)"

# Process status
ps aux | grep -E "(processor_manager|uvicorn)" | grep -v grep
            </div>

            <h3>ğŸ”§ Operational Procedures</h3>
            <table>
                <tr>
                    <th>Operation</th>
                    <th>Command</th>
                    <th>Expected Result</th>
                    <th>Troubleshooting</th>
                </tr>
                <tr>
                    <td>Start Pipeline</td>
                    <td><code>python3 processor_manager_new.py &</code></td>
                    <td>11 workers started, heartbeat active</td>
                    <td>Check Kafka connectivity, Java path</td>
                </tr>
                <tr>
                    <td>Start API</td>
                    <td><code>uvicorn api.main_new:app --host 0.0.0.0 --port 8082 &</code></td>
                    <td>API responding on port 8082</td>
                    <td>Kill existing processes on port 8082</td>
                </tr>
                <tr>
                    <td>Test Pipeline</td>
                    <td><code>python3 test_demise_pipeline.py</code></td>
                    <td>All tests pass, pipeline processing</td>
                    <td>Check API health, Kafka topic existence</td>
                </tr>
                <tr>
                    <td>Stop System</td>
                    <td><code>pkill -f processor_manager; pkill -f uvicorn</code></td>
                    <td>Graceful shutdown with cleanup</td>
                    <td>Force kill with -9 if needed</td>
                </tr>
            </table>
        </div>

        <div class="success">
            <h3>âœ… System Status</h3>
            <p>The Server Demise Pipeline is fully operational and processing requests in real-time through the sequential workflow!</p>
        </div>

        <div class="section">
            <h2>ï¿½ Technical Implementation Details</h2>
            
            <h3>ğŸ—ï¸ Core Technologies</h3>
            <table>
                <tr>
                    <th>Technology</th>
                    <th>Version</th>
                    <th>Purpose</th>
                    <th>Key Features Used</th>
                </tr>
                <tr>
                    <td><strong>Apache Kafka</strong></td>
                    <td>3.5.1</td>
                    <td>Message streaming platform</td>
                    <td>
                        â€¢ Topic partitioning (3 partitions)<br>
                        â€¢ Consumer groups<br>
                        â€¢ Message persistence<br>
                        â€¢ Automatic rebalancing
                    </td>
                </tr>
                <tr>
                    <td><strong>Python</strong></td>
                    <td>3.11.13</td>
                    <td>Primary development language</td>
                    <td>
                        â€¢ Async/await for FastAPI<br>
                        â€¢ Threading for processors<br>
                        â€¢ Type hints for reliability<br>
                        â€¢ Exception handling
                    </td>
                </tr>
                <tr>
                    <td><strong>FastAPI</strong></td>
                    <td>Latest</td>
                    <td>REST API framework</td>
                    <td>
                        â€¢ Automatic OpenAPI docs<br>
                        â€¢ Request validation<br>
                        â€¢ Async request handling<br>
                        â€¢ JSON serialization
                    </td>
                </tr>
                <tr>
                    <td><strong>kafka-python</strong></td>
                    <td>Latest</td>
                    <td>Kafka client library</td>
                    <td>
                        â€¢ Producer/Consumer APIs<br>
                        â€¢ Automatic serialization<br>
                        â€¢ Connection pooling<br>
                        â€¢ Error handling
                    </td>
                </tr>
            </table>

            <h3>ğŸ§µ Threading & Concurrency Model</h3>
            <div class="code-block">
# Processor Manager - Main Thread
â”œâ”€â”€ ThreadPoolExecutor (11 workers)
    â”œâ”€â”€ ServerCheckProcessor Workers (3)
    â”‚   â”œâ”€â”€ Worker-0: Kafka Consumer + Business Logic
    â”‚   â”œâ”€â”€ Worker-1: Kafka Consumer + Business Logic  
    â”‚   â””â”€â”€ Worker-2: Kafka Consumer + Business Logic
    â”œâ”€â”€ ServerPowerOffProcessor Workers (3)
    â”‚   â”œâ”€â”€ Worker-0: Kafka Consumer + Business Logic
    â”‚   â”œâ”€â”€ Worker-1: Kafka Consumer + Business Logic
    â”‚   â””â”€â”€ Worker-2: Kafka Consumer + Business Logic
    â”œâ”€â”€ ServerCoolingPeriodProcessor Workers (2)
    â”‚   â”œâ”€â”€ Worker-0: Kafka Consumer + Cooling Monitor
    â”‚   â””â”€â”€ Worker-1: Kafka Consumer + Cooling Monitor
    â””â”€â”€ ServerDemiseProcessor Workers (3)
        â”œâ”€â”€ Worker-0: Kafka Consumer + Business Logic
        â”œâ”€â”€ Worker-1: Kafka Consumer + Business Logic
        â””â”€â”€ Worker-2: Kafka Consumer + Business Logic

# FastAPI Server - Separate Process
â”œâ”€â”€ Uvicorn ASGI Server
    â”œâ”€â”€ Main Thread: HTTP Request Handling
    â”œâ”€â”€ Kafka Producer: Message Publishing
    â””â”€â”€ Background Tasks: Health Checks
            </div>

            <h3>ğŸ” Security & Error Handling</h3>
            <table>
                <tr>
                    <th>Area</th>
                    <th>Implementation</th>
                    <th>Protection Level</th>
                </tr>
                <tr>
                    <td><strong>Input Validation</strong></td>
                    <td>
                        â€¢ Pydantic models for API<br>
                        â€¢ Server ID format validation<br>
                        â€¢ Message schema validation
                    </td>
                    <td>High - Prevents malformed requests</td>
                </tr>
                <tr>
                    <td><strong>Error Handling</strong></td>
                    <td>
                        â€¢ Try-catch blocks in processors<br>
                        â€¢ Graceful degradation<br>
                        â€¢ Detailed error logging<br>
                        â€¢ Automatic retry logic
                    </td>
                    <td>High - System stays stable</td>
                </tr>
                <tr>
                    <td><strong>Resource Management</strong></td>
                    <td>
                        â€¢ Connection pooling<br>
                        â€¢ Graceful shutdown handlers<br>
                        â€¢ Memory usage monitoring<br>
                        â€¢ Thread safety
                    </td>
                    <td>Medium - Prevents resource leaks</td>
                </tr>
                <tr>
                    <td><strong>Data Integrity</strong></td>
                    <td>
                        â€¢ Message UUID tracking<br>
                        â€¢ Kafka message persistence<br>
                        â€¢ Atomic operations<br>
                        â€¢ Audit trails
                    </td>
                    <td>High - No data loss</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>ï¿½ğŸ“ Support & Maintenance Information</h2>
            
            <h3>ğŸ¯ System Specifications</h3>
            <ul>
                <li><strong>API Port</strong>: 8082 (FastAPI + Uvicorn)</li>
                <li><strong>Documentation Port</strong>: 8093 (This documentation)</li>
                <li><strong>Kafka Broker</strong>: localhost:9092</li>
                <li><strong>Kafka Topic</strong>: server-demise-pipeline (3 partitions)</li>
                <li><strong>Consumer Group</strong>: demise-processor-group</li>
                <li><strong>Workers</strong>: 11 total (3 check + 3 poweroff + 2 cooling + 3 demise)</li>
                <li><strong>Java Runtime</strong>: OpenJDK 17 (required for Kafka)</li>
            </ul>

            <h3>ğŸ“‚ Important File Locations</h3>
            <ul>
                <li><strong>Project Root</strong>: /root/kafka/kafka-processors/</li>
                <li><strong>Configuration</strong>: /root/kafka/kafka-processors/config/config.json</li>
                <li><strong>Logs</strong>: /tmp/docs_server.log (documentation), processor terminal (pipeline)</li>
                <li><strong>PID Files</strong>: /tmp/docs_server.pid</li>
                <li><strong>Kafka Installation</strong>: /root/kafka/</li>
            </ul>

            <h3>ğŸš¨ Emergency Procedures</h3>
            <div class="code-block">
# Complete System Restart
pkill -f processor_manager; pkill -f uvicorn     # Stop services
cd /root/kafka/kafka-processors                  # Go to project
python3 processor_manager_new.py &              # Start processors  
python3 -m uvicorn api.main_new:app --host 0.0.0.0 --port 8082 &  # Start API

# Reset Kafka Topic (DANGER: Deletes all messages)
cd /root/kafka
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.16.0.8-2.el8.x86_64
bin/kafka-topics.sh --delete --topic server-demise-pipeline --bootstrap-server localhost:9092
bin/kafka-topics.sh --create --topic server-demise-pipeline --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

# Health Check Commands
curl http://localhost:8082/health               # API health
curl http://localhost:8082/pipeline-status      # Pipeline status
python3 test_demise_pipeline.py                # Full system test
            </div>

            <h3>ğŸ“ Contact & Support</h3>
            <ul>
                <li><strong>Documentation Server</strong>: <a href="http://195.35.6.88:8093/">Live Documentation</a></li>
                <li><strong>API Interactive Docs</strong>: <a href="http://195.35.6.88:8082/docs">FastAPI Swagger UI</a></li>
                <li><strong>Log Monitoring</strong>: Check processor terminal for real-time debugging</li>
                <li><strong>Configuration Changes</strong>: Edit config/config.json and restart services</li>
                <li><strong>Performance Tuning</strong>: Adjust workers_per_processor and Kafka partitions</li>
            </ul>
        </div>
    </div>
</body>
</html>